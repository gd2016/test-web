import{O as V,a4 as x,a7 as G,a8 as T,k as m,ai as p,a9 as K,aj as q,a3 as b,q as Z,a5 as F,ak as H,m as B,D as O,H as S,al as k,am as U,an as R}from"./lib-7rFfF-zH.js";import{_ as P,a as A}from"./index-BQp9lR5O.js";import"./ui-3d9NI8O3.js";var E={exports:{}},D={exports:{}};(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g={rotl:function(n,u){return n<<u|n>>>32-u},rotr:function(n,u){return n<<32-u|n>>>u},endian:function(n){if(n.constructor==Number)return g.rotl(n,8)&16711935|g.rotl(n,24)&4278255360;for(var u=0;u<n.length;u++)n[u]=g.endian(n[u]);return n},randomBytes:function(n){for(var u=[];n>0;n--)u.push(Math.floor(Math.random()*256));return u},bytesToWords:function(n){for(var u=[],l=0,i=0;l<n.length;l++,i+=8)u[i>>>5]|=n[l]<<24-i%32;return u},wordsToBytes:function(n){for(var u=[],l=0;l<n.length*32;l+=8)u.push(n[l>>>5]>>>24-l%32&255);return u},bytesToHex:function(n){for(var u=[],l=0;l<n.length;l++)u.push((n[l]>>>4).toString(16)),u.push((n[l]&15).toString(16));return u.join("")},hexToBytes:function(n){for(var u=[],l=0;l<n.length;l+=2)u.push(parseInt(n.substr(l,2),16));return u},bytesToBase64:function(n){for(var u=[],l=0;l<n.length;l+=3)for(var i=n[l]<<16|n[l+1]<<8|n[l+2],d=0;d<4;d++)l*8+d*6<=n.length*8?u.push(c.charAt(i>>>6*(3-d)&63)):u.push("=");return u.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var u=[],l=0,i=0;l<n.length;i=++l%4)i!=0&&u.push((c.indexOf(n.charAt(l-1))&Math.pow(2,-2*i+8)-1)<<i*2|c.indexOf(n.charAt(l))>>>6-i*2);return u}};D.exports=g})();var W=D.exports,C={utf8:{stringToBytes:function(c){return C.bin.stringToBytes(unescape(encodeURIComponent(c)))},bytesToString:function(c){return decodeURIComponent(escape(C.bin.bytesToString(c)))}},bin:{stringToBytes:function(c){for(var g=[],n=0;n<c.length;n++)g.push(c.charCodeAt(n)&255);return g},bytesToString:function(c){for(var g=[],n=0;n<c.length;n++)g.push(String.fromCharCode(c[n]));return g.join("")}}},I=C;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $=function(c){return c!=null&&(L(c)||Y(c)||!!c._isBuffer)};function L(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function Y(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&L(c.slice(0,0))}(function(){var c=W,g=I.utf8,n=$,u=I.bin,l=function(i,d){i.constructor==String?d&&d.encoding==="binary"?i=u.stringToBytes(i):i=g.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var o=c.bytesToWords(i),f=i.length*8,e=1732584193,t=-271733879,a=-1732584194,r=271733878,s=0;s<o.length;s++)o[s]=(o[s]<<8|o[s]>>>24)&16711935|(o[s]<<24|o[s]>>>8)&4278255360;o[f>>>5]|=128<<f%32,o[(f+64>>>9<<4)+14]=f;for(var h=l._ff,v=l._gg,_=l._hh,y=l._ii,s=0;s<o.length;s+=16){var w=e,z=t,M=a,N=r;e=h(e,t,a,r,o[s+0],7,-680876936),r=h(r,e,t,a,o[s+1],12,-389564586),a=h(a,r,e,t,o[s+2],17,606105819),t=h(t,a,r,e,o[s+3],22,-1044525330),e=h(e,t,a,r,o[s+4],7,-176418897),r=h(r,e,t,a,o[s+5],12,1200080426),a=h(a,r,e,t,o[s+6],17,-1473231341),t=h(t,a,r,e,o[s+7],22,-45705983),e=h(e,t,a,r,o[s+8],7,1770035416),r=h(r,e,t,a,o[s+9],12,-1958414417),a=h(a,r,e,t,o[s+10],17,-42063),t=h(t,a,r,e,o[s+11],22,-1990404162),e=h(e,t,a,r,o[s+12],7,1804603682),r=h(r,e,t,a,o[s+13],12,-40341101),a=h(a,r,e,t,o[s+14],17,-1502002290),t=h(t,a,r,e,o[s+15],22,1236535329),e=v(e,t,a,r,o[s+1],5,-165796510),r=v(r,e,t,a,o[s+6],9,-1069501632),a=v(a,r,e,t,o[s+11],14,643717713),t=v(t,a,r,e,o[s+0],20,-373897302),e=v(e,t,a,r,o[s+5],5,-701558691),r=v(r,e,t,a,o[s+10],9,38016083),a=v(a,r,e,t,o[s+15],14,-660478335),t=v(t,a,r,e,o[s+4],20,-405537848),e=v(e,t,a,r,o[s+9],5,568446438),r=v(r,e,t,a,o[s+14],9,-1019803690),a=v(a,r,e,t,o[s+3],14,-187363961),t=v(t,a,r,e,o[s+8],20,1163531501),e=v(e,t,a,r,o[s+13],5,-1444681467),r=v(r,e,t,a,o[s+2],9,-51403784),a=v(a,r,e,t,o[s+7],14,1735328473),t=v(t,a,r,e,o[s+12],20,-1926607734),e=_(e,t,a,r,o[s+5],4,-378558),r=_(r,e,t,a,o[s+8],11,-2022574463),a=_(a,r,e,t,o[s+11],16,1839030562),t=_(t,a,r,e,o[s+14],23,-35309556),e=_(e,t,a,r,o[s+1],4,-1530992060),r=_(r,e,t,a,o[s+4],11,1272893353),a=_(a,r,e,t,o[s+7],16,-155497632),t=_(t,a,r,e,o[s+10],23,-1094730640),e=_(e,t,a,r,o[s+13],4,681279174),r=_(r,e,t,a,o[s+0],11,-358537222),a=_(a,r,e,t,o[s+3],16,-722521979),t=_(t,a,r,e,o[s+6],23,76029189),e=_(e,t,a,r,o[s+9],4,-640364487),r=_(r,e,t,a,o[s+12],11,-421815835),a=_(a,r,e,t,o[s+15],16,530742520),t=_(t,a,r,e,o[s+2],23,-995338651),e=y(e,t,a,r,o[s+0],6,-198630844),r=y(r,e,t,a,o[s+7],10,1126891415),a=y(a,r,e,t,o[s+14],15,-1416354905),t=y(t,a,r,e,o[s+5],21,-57434055),e=y(e,t,a,r,o[s+12],6,1700485571),r=y(r,e,t,a,o[s+3],10,-1894986606),a=y(a,r,e,t,o[s+10],15,-1051523),t=y(t,a,r,e,o[s+1],21,-2054922799),e=y(e,t,a,r,o[s+8],6,1873313359),r=y(r,e,t,a,o[s+15],10,-30611744),a=y(a,r,e,t,o[s+6],15,-1560198380),t=y(t,a,r,e,o[s+13],21,1309151649),e=y(e,t,a,r,o[s+4],6,-145523070),r=y(r,e,t,a,o[s+11],10,-1120210379),a=y(a,r,e,t,o[s+2],15,718787259),t=y(t,a,r,e,o[s+9],21,-343485551),e=e+w>>>0,t=t+z>>>0,a=a+M>>>0,r=r+N>>>0}return c.endian([e,t,a,r])};l._ff=function(i,d,o,f,e,t,a){var r=i+(d&o|~d&f)+(e>>>0)+a;return(r<<t|r>>>32-t)+d},l._gg=function(i,d,o,f,e,t,a){var r=i+(d&f|o&~f)+(e>>>0)+a;return(r<<t|r>>>32-t)+d},l._hh=function(i,d,o,f,e,t,a){var r=i+(d^o^f)+(e>>>0)+a;return(r<<t|r>>>32-t)+d},l._ii=function(i,d,o,f,e,t,a){var r=i+(o^(d|~f))+(e>>>0)+a;return(r<<t|r>>>32-t)+d},l._blocksize=16,l._digestsize=16,E.exports=function(i,d){if(i==null)throw new Error("Illegal argument "+i);var o=c.wordsToBytes(l(i,d));return d&&d.asBytes?o:d&&d.asString?u.bytesToString(o):c.bytesToHex(o)}})();var J=E.exports;const Q=V(J),X="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='31.88'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20257'%3e%3cdefs%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb466'%20x1='-.828%25'%20x2='57.636%25'%20y1='7.652%25'%20y2='78.411%25'%3e%3cstop%20offset='0%25'%20stop-color='%2341D1FF'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23BD34FE'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb467'%20x1='43.376%25'%20x2='50.316%25'%20y1='2.242%25'%20y2='89.03%25'%3e%3cstop%20offset='0%25'%20stop-color='%23FFEA83'%3e%3c/stop%3e%3cstop%20offset='8.333%25'%20stop-color='%23FFDD35'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23FFA800'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb466)'%20d='M255.153%2037.938L134.897%20252.976c-2.483%204.44-8.862%204.466-11.382.048L.875%2037.958c-2.746-4.814%201.371-10.646%206.827-9.67l120.385%2021.517a6.537%206.537%200%200%200%202.322-.004l117.867-21.483c5.438-.991%209.574%204.796%206.877%209.62Z'%3e%3c/path%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb467)'%20d='M185.432.063L96.44%2017.501a3.268%203.268%200%200%200-2.634%203.014l-5.474%2092.456a3.268%203.268%200%200%200%203.997%203.378l24.777-5.718c2.318-.535%204.413%201.507%203.936%203.838l-7.361%2036.047c-.495%202.426%201.782%204.5%204.151%203.78l15.304-4.649c2.372-.72%204.652%201.36%204.15%203.788l-11.698%2056.621c-.732%203.542%203.979%205.473%205.943%202.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505%204.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z'%3e%3c/path%3e%3c/svg%3e",j={data(){return{customActiveKey:"tab1",loginBtn:!1,loginType:0,isLoginError:!1,requiredTwoStepCaptcha:!1,stepCaptchaVisible:!1,form:{},state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1}}},created(){},methods:{$t(c){return{"user.login.userName":"用户名","user.login.password":"密码","user.login.username.placeholder":"账户: admin","user.login.password.placeholder":"密码: admin or ant.design","user.login.message-invalid-credentials":"账户或密码错误（admin/ant.design）","user.login.message-invalid-verification-code":"验证码错误","user.login.tab-login-credentials":"账户密码登录","user.login.tab-login-mobile":"手机号登录","user.login.mobile.placeholder":"手机号","user.login.mobile.verification-code.placeholder":"验证码","user.login.remember-me":"自动登录","user.login.forgot-password":"忘记密码","user.login.sign-in-with":"其他登录方式","user.login.signup":"注册账户","user.login.login":"登录","user.register.register":"注册","user.register.email.placeholder":"邮箱","user.register.password.placeholder":"请至少输入 6 个字符。请不要使用容易被猜到的密码。","user.register.password.popover-message":"请至少输入 6 个字符。请不要使用容易被猜到的密码。","user.register.confirm-password.placeholder":"确认密码","user.register.get-verification-code":"获取验证码","user.register.sign-in":"使用已有账户登录","user.register-result.msg":"你的账户：{email} 注册成功","user.register-result.activation-email":"激活邮件已发送到你的邮箱中，邮件有效期为24小时。请及时登录邮箱，点击邮件中的链接激活帐户。","user.register-result.back-home":"返回首页","user.register-result.view-mailbox":"查看邮箱","user.email.required":"请输入邮箱地址！","user.email.wrong-format":"邮箱地址格式错误！","user.userName.required":"请输入帐户名或邮箱地址","user.password.required":"请输入密码！","user.password.twice.msg":"两次输入的密码不匹配!","user.password.strength.msg":"密码强度不够 ","user.password.strength.strong":"强度：强","user.password.strength.medium":"强度：中","user.password.strength.low":"强度：低","user.password.strength.short":"强度：太短","user.confirm-password.required":"请确认密码！","user.phone-number.required":"请输入正确的手机号","user.phone-number.wrong-format":"手机号格式错误！","user.verification-code.required":"请输入验证码！"}[c]},handleUsernameOrEmail(c,g,n){const{state:u}=this;/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(g)?u.loginType=0:u.loginType=1,n()},handleTabClick(c){this.customActiveKey=c},handleSubmit(c){c.preventDefault();const{form:{validateFields:g},state:n,customActiveKey:u,Login:l}=this;n.loginBtn=!0,g(u==="tab1"?["username","password"]:["mobile","captcha"],{force:!0},(d,o)=>{if(d)setTimeout(()=>{n.loginBtn=!1},600);else{console.log("login form",o);const f={...o};delete f.username,f[n.loginType?"username":"email"]=o.username,f.password=Q(o.password),A.user.login(f).then(e=>this.loginSuccess(e)).catch(e=>this.requestFailed(e)).finally(()=>{n.loginBtn=!1})}})},getCaptcha(c){c.preventDefault();const{form:{validateFields:g},state:n}=this;g(["mobile"],{force:!0},(u,l)=>{if(!u){n.smsSendBtn=!0;const i=window.setInterval(()=>{n.time--<=0&&(n.time=60,n.smsSendBtn=!1,window.clearInterval(i))},1e3);this.$message.loading("验证码发送中..",0)}})},stepCaptchaSuccess(){this.loginSuccess()},stepCaptchaCancel(){A.user.logout().then(()=>{this.loginBtn=!1,this.stepCaptchaVisible=!1})},loginSuccess(c){this.$router.push({path:"/"}),setTimeout(()=>{this.$notification.success({message:"欢迎",description:"欢迎回来"})},1e3),this.isLoginError=!1},requestFailed(c){this.isLoginError=!0,this.$notification.error({message:"错误",description:((c.response||{}).data||{}).message||"请求出现错误，请稍后再试",duration:4})}}},ee=c=>(U("data-v-d3c5919b"),c=c(),R(),c),re={class:"login_container"},te=ee(()=>T("div",{class:"user-layout-lang"},null,-1)),oe={class:"user-layout-content"},ae=q('<div class="top" data-v-d3c5919b><div class="header" data-v-d3c5919b><a href="/" data-v-d3c5919b><img src="'+X+'" class="logo" alt="logo" data-v-d3c5919b><span class="title" data-v-d3c5919b>Ant Design</span></a></div><div class="desc" data-v-d3c5919b></div></div>',1),se={class:"main"},ne=q('<div class="footer" data-v-d3c5919b><div class="links" data-v-d3c5919b><a href="_self" data-v-d3c5919b>帮助</a><a href="_self" data-v-d3c5919b>隐私</a><a href="_self" data-v-d3c5919b>条款</a></div><div class="copyright" data-v-d3c5919b>Copyright © 2018 vueComponent</div></div>',1);function ie(c,g,n,u,l,i){const d=b("a-alert"),o=b("a-icon"),f=b("a-input"),e=b("a-form-item"),t=b("a-input-password"),a=b("a-tab-pane"),r=b("a-col"),s=b("a-button"),h=b("a-row"),v=b("a-tabs"),_=b("a-checkbox"),y=b("a-form"),w=Z("decorator");return x(),G("div",{id:"userLayout",class:K(["user-layout-wrapper",c.isMobile&&"mobile"])},[T("div",re,[te,T("div",oe,[ae,T("div",se,[m(y,{id:"formLogin",class:"user-layout-login",ref:"formLogin",form:l.form,onSubmit:i.handleSubmit},{default:p(()=>[m(v,{"active-key":l.customActiveKey,"tab-bar-style":{textAlign:"center",borderBottom:"unset"},onChange:i.handleTabClick},{default:p(()=>[m(a,{key:"tab1",tab:i.$t("user.login.tab-login-credentials")},{default:p(()=>[l.isLoginError?(x(),F(d,{key:0,type:"error","show-icon":"",style:{"margin-bottom":"24px"},message:i.$t("user.login.message-invalid-credentials")},null,8,["message"])):H("",!0),m(e,null,{default:p(()=>[B((x(),F(f,{size:"large",type:"text",placeholder:i.$t("user.login.username.placeholder")},{prefix:p(()=>[m(o,{type:"user",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["placeholder"])),[[w,["username",{rules:[{required:!0,message:i.$t("user.userName.required")},{validator:i.handleUsernameOrEmail}],validateTrigger:"change"}]]])]),_:1}),m(e,null,{default:p(()=>[B((x(),F(t,{size:"large",placeholder:i.$t("user.login.password.placeholder")},{prefix:p(()=>[m(o,{type:"lock",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["placeholder"])),[[w,["password",{rules:[{required:!0,message:i.$t("user.password.required")}],validateTrigger:"blur"}]]])]),_:1})]),_:1},8,["tab"]),m(a,{key:"tab2",tab:i.$t("user.login.tab-login-mobile")},{default:p(()=>[m(e,null,{default:p(()=>[B((x(),F(f,{size:"large",type:"text",placeholder:i.$t("user.login.mobile.placeholder")},{prefix:p(()=>[m(o,{type:"mobile",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["placeholder"])),[[w,["mobile",{rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:i.$t("user.login.mobile.placeholder")}],validateTrigger:"change"}]]])]),_:1}),m(h,{gutter:16},{default:p(()=>[m(r,{class:"gutter-row",span:16},{default:p(()=>[m(e,null,{default:p(()=>[B((x(),F(f,{size:"large",type:"text",placeholder:i.$t("user.login.mobile.verification-code.placeholder")},{prefix:p(()=>[m(o,{type:"mail",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["placeholder"])),[[w,["captcha",{rules:[{required:!0,message:i.$t("user.verification-code.required")}],validateTrigger:"blur"}]]])]),_:1})]),_:1}),m(r,{class:"gutter-row",span:8},{default:p(()=>[m(s,{class:"getCaptcha",tabindex:"-1",disabled:l.state.smsSendBtn,onClick:O(i.getCaptcha,["stop","prevent"])},{default:p(()=>[S("获取验证码")]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["tab"])]),_:1},8,["active-key","onChange"]),m(e,null,{default:p(()=>[B((x(),F(_,null,{default:p(()=>[S(k(i.$t("user.login.remember-me")),1)]),_:1})),[[w,["rememberMe",{valuePropName:"checked"}]]])]),_:1}),m(e,{style:{"margin-top":"24px"}},{default:p(()=>[m(s,{size:"large",type:"primary","html-type":"submit",class:"login-button",loading:l.state.loginBtn,disabled:l.state.loginBtn},{default:p(()=>[S(k(i.$t("user.login.login")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["form","onSubmit"])]),ne])])],2)}const de=P(j,[["render",ie],["__scopeId","data-v-d3c5919b"]]);export{de as default};
